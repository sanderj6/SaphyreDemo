@typeparam T
@inherits Saphyre_InputBase<decimal>
@using System.Linq.Expressions
@using System.Reflection
@using MudBlazor
@using FluentValidation
@using SaphyreDemo.Helpers

<div class="saphyre_numbox position-absolute">

	<MudNumericField Value="@InputValue"
					 ValueChanged="(async(decimal newValue) => {await OnInputValueChanged(newValue);})"
					 Class="@CSSClass"
					 Disabled="@IsDisabled"
					 ReadOnly="@IsReadOnly"
					 Immediate="true"
					 Format="@Format"
					 Label="@LabelText"
					 HideSpinButtons="true"
					 Adornment="@Adornment"
					 AdornmentColor="Color.Dark"
					 AdornmentIcon="@AdornmentIcon"
					 Placeholder="" />

		@if (IsValidation)
	{
	<ValidationMessage For="@FieldExpression" />
	}

</div>


@code {
	[Parameter]
	public bool IsPercentage { get; set; }

	private string Format => IsPercentage ? "N2" : "N2";
	private Adornment Adornment => IsPercentage ? Adornment.End : Adornment.None;
	private string AdornmentIcon => IsPercentage ? Icons.Material.Filled.Percent : string.Empty;

	FluentValueValidator<decimal> numBoxValidator = new FluentValueValidator<decimal>(x => 
		x.GreaterThan(0));
}
